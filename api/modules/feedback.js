(()=>{var e={300:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",s="hour",o="day",c="week",u="month",l="quarter",f="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},b=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:b,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+b(r,2,"0")+":"+b(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),a=n-i<0,s=t.clone().add(r+(a?-1:1),u);return+(-(r+(n-i)/(a?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:f,w:c,d:o,D:h,h:s,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",x={};x[v]=m;var w="$isDayjsObject",_=function(e){return e instanceof C||!(!e||!e[w])},j=function e(t,n,r){var i;if(!t)return v;if("string"==typeof t){var a=t.toLowerCase();x[a]&&(i=a),n&&(x[a]=n,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var o=t.name;x[o]=t,i=o}return!r&&i&&(v=i),i||!r&&v},S=function(e,t){if(_(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new C(n)},$=y;$.l=j,$.i=_,$.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function m(e){this.$L=j(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var b=m.prototype;return b.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if($.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},b.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},b.$utils=function(){return $},b.isValid=function(){return!(this.$d.toString()===d)},b.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},b.isAfter=function(e,t){return S(e)<this.startOf(t)},b.isBefore=function(e,t){return this.endOf(t)<S(e)},b.$g=function(e,t,n){return $.u(e)?this[t]:this.set(n,e)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(e,t){var n=this,r=!!$.u(t)||t,l=$.p(e),d=function(e,t){var i=$.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(o)},p=function(e,t){return $.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,b=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case f:return r?d(1,0):d(31,11);case u:return r?d(1,m):d(0,m+1);case c:var v=this.$locale().weekStart||0,x=(g<v?g+7:g)-v;return d(r?b-x:b+(6-x),m);case o:case h:return p(y+"Hours",0);case s:return p(y+"Minutes",1);case a:return p(y+"Seconds",2);case i:return p(y+"Milliseconds",3);default:return this.clone()}},b.endOf=function(e){return this.startOf(e,!1)},b.$set=function(e,t){var n,c=$.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[o]=l+"Date",n[h]=l+"Date",n[u]=l+"Month",n[f]=l+"FullYear",n[s]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[c],p=c===o?this.$D+(t-this.$W):t;if(c===u||c===f){var g=this.clone().set(h,1);g.$d[d](p),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},b.set=function(e,t){return this.clone().$set(e,t)},b.get=function(e){return this[$.p(e)]()},b.add=function(r,l){var h,d=this;r=Number(r);var p=$.p(l),g=function(e){var t=S(d);return $.w(t.date(t.date()+Math.round(e*r)),d)};if(p===u)return this.set(u,this.$M+r);if(p===f)return this.set(f,this.$y+r);if(p===o)return g(1);if(p===c)return g(7);var m=(h={},h[a]=t,h[s]=n,h[i]=e,h)[p]||1,b=this.$d.getTime()+r*m;return $.w(b,this)},b.subtract=function(e,t){return this.add(-1*e,t)},b.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=$.z(this),a=this.$H,s=this.$m,o=this.$M,c=n.weekdays,u=n.months,l=n.meridiem,f=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},h=function(e){return $.s(a%12||12,e,"0")},p=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return $.s(t.$y,4,"0");case"M":return o+1;case"MM":return $.s(o+1,2,"0");case"MMM":return f(n.monthsShort,o,u,3);case"MMMM":return f(u,o);case"D":return t.$D;case"DD":return $.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(n.weekdaysMin,t.$W,c,2);case"ddd":return f(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(a);case"HH":return $.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return p(a,s,!0);case"A":return p(a,s,!1);case"m":return String(s);case"mm":return $.s(s,2,"0");case"s":return String(t.$s);case"ss":return $.s(t.$s,2,"0");case"SSS":return $.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(r,h,d){var p,g=this,m=$.p(h),b=S(r),y=(b.utcOffset()-this.utcOffset())*t,v=this-b,x=function(){return $.m(g,b)};switch(m){case f:p=x()/12;break;case u:p=x();break;case l:p=x()/3;break;case c:p=(v-y)/6048e5;break;case o:p=(v-y)/864e5;break;case s:p=v/n;break;case a:p=v/t;break;case i:p=v/e;break;default:p=v}return d?p:$.a(p)},b.daysInMonth=function(){return this.endOf(u).$D},b.$locale=function(){return x[this.$L]},b.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=j(e,t,!0);return r&&(n.$L=r),n},b.clone=function(){return $.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},m}(),O=C.prototype;return S.prototype=O,[["$ms",r],["$s",i],["$m",a],["$H",s],["$W",o],["$M",u],["$y",f],["$D",h]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,C,S),e.$i=!0),S},S.locale=j,S.isDayjs=_,S.unix=function(e){return S(1e3*e)},S.en=x[v],S.Ls=x,S.p={},S}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=ReactJsxRuntime,t=React;var r=n.n(t);const i=(0,t.createContext)({});function a(){return(0,t.useContext)(i)}function s(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function o(e){return s(e,"Undefined")}function c(e){return s(e,"String")}function u(e){return e&&e.nodeType&&1===e.nodeType}function l(e){return s(e,"Number")}function f(e){return s(e,"Function")}const h=classNames;var d=n.n(h);const p=Antd;var g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function m(t){const{type:n,width:r,children:i,placement:s,onCancel:o,className:c,rootClassName:u}=t,l=g(t,["type","width","children","placement","onCancel","className","rootClassName"]),{app:f}=a();return"toolbar"===n?(0,e.jsx)(p.Drawer,Object.assign({styles:{body:{padding:0}}},l,{mask:!1,width:r,onClose:o,className:c,rootClassName:d()("popup-toolbar",u),placement:f.device.phone?"bottom":s,children:i})):"modal"===n?(0,e.jsx)(p.Modal,Object.assign({},l,{onCancel:o,rootClassName:u,width:f.device.phone?"90%":r,className:d()(c,"popup-modal"),children:i})):(0,e.jsx)(p.Drawer,Object.assign({},l,{onClose:o,className:c,width:f.device.phone?"100%":r,rootClassName:d()("popup-drawer",u),placement:f.device.phone?"bottom":s,children:i}))}var b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function y(n){const{id:r,type:i,onCancel:s,onChange:o,onVisible:c,children:f,width:h=378,placement:d="right",destoryWithRender:p=!0}=n,g=b(n,["id","type","onCancel","onChange","onVisible","children","width","placement","destoryWithRender"]),y=(0,t.useRef)("0px"),v=(0,t.useRef)(null),{me:x,app:w,container:_}=a(),[j,S]=(0,t.useState)(!1),[$,C]=(0,t.useState)(8e3);return(0,t.useEffect)((()=>{const e=[];function t(e){if(e){const e=w.field("container");if(u(e)){const t=e.style.getPropertyValue("--offsetright");t&&(y.current=t)}w.fire("display",!0,"0px","offsetright"),_.style.display="none"}else w.fire("display",!0,y.current||"0px","offsetright"),y.current="",_.style.removeProperty("display")}return e.push(w.on("screenshot_change",t)),e.push(w.on("print_change",t)),e.push(w.on(r,((...e)=>{S((t=>{if(o){e.unshift(!t);if(o.apply(w,e))return t}return t||C((e=>{let t=e+10;const n=w.field("zIndex");return l(n)&&(t=n+10),w.field("zIndex",t),t})),c&&c(!t),!t}))}))),e.push(w.on(`${x.id}_enable`,(()=>{if(!w.device.phone&&!i){const e=w.field("container");if(u(e)){const t=e.style.getPropertyValue("--offsetright");t&&w.fire("display",!0,t,`offset${d}`)}}}))),()=>{e.forEach((e=>{e()}))}}),[]),(0,t.useEffect)((()=>{v.current&&clearTimeout(v.current),v.current=setTimeout((()=>{if(j){if(!w.device.phone&&!i){const e=w.field("container");if(u(e)){const t=e.style.getPropertyValue("--offsetright");t&&(y.current=t)}w.fire("display",!0,`${h}px`,`offset${d}`)}}else w.device.phone||i||w.fire("display",!0,y.current||"0px",`offset${d}`);w.fire("toolbar_state",r,j?"active":"inactive")}),500)}),[h,j]),(0,t.useEffect)((()=>w.on("render_leave",(()=>{p&&(c&&c(!1),S(!1))}))),[p]),(0,e.jsx)(m,Object.assign({type:i,open:j,width:h,zIndex:$,onCancel:e=>{c&&c(!1),S(!1),s&&s(e)},placement:d},g,{children:f}))}var v=n(300),x=n.n(v);function w(){const e=window.innerHeight-420;return e>950?950:e}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(null,arguments)}const j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}function M(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const T=Math.round;function H(e,t){const n=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map((e=>parseFloat(e)));for(let e=0;e<3;e+=1)r[e]=t(r[e]||0,n[e]||"",e);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const D=(e,t,n)=>0===n?e:e/100;function E(e,t){const n=t||255;return e>n?n:e<0?0:e}class N{constructor(e){function t(t){return t[0]in e&&t[1]in e&&t[2]in e}if(M(this,"isValid",!0),M(this,"r",0),M(this,"g",0),M(this,"b",0),M(this,"a",1),M(this,"_h",void 0),M(this,"_s",void 0),M(this,"_l",void 0),M(this,"_v",void 0),M(this,"_max",void 0),M(this,"_min",void 0),M(this,"_brightness",void 0),e)if("string"==typeof e){const n=e.trim();function r(e){return n.startsWith(e)}/^#?[A-F\d]{3,8}$/i.test(n)?this.fromHexString(n):r("rgb")?this.fromRgbString(n):r("hsl")?this.fromHslString(n):(r("hsv")||r("hsb"))&&this.fromHsvString(n)}else if(e instanceof N)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(t("rgb"))this.r=E(e.r),this.g=E(e.g),this.b=E(e.b),this.a="number"==typeof e.a?E(e.a,1):1;else if(t("hsl"))this.fromHsl(e);else{if(!t("hsv"))throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e));this.fromHsv(e)}else;}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const t=this.toHsv();return t.h=e,this._c(t)}getLuminance(){function e(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return.2126*e(this.r)+.7152*e(this.g)+.0722*e(this.b)}getHue(){if(void 0===this._h){const e=this.getMax()-this.getMin();this._h=0===e?0:T(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(void 0===this._s){const e=this.getMax()-this.getMin();this._s=0===e?0:e/this.getMax()}return this._s}getLightness(){return void 0===this._l&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return void 0===this._v&&(this._v=this.getMax()/255),this._v}getBrightness(){return void 0===this._brightness&&(this._brightness=(299*this.r+587*this.g+114*this.b)/1e3),this._brightness}darken(e=10){const t=this.getHue(),n=this.getSaturation();let r=this.getLightness()-e/100;return r<0&&(r=0),this._c({h:t,s:n,l:r,a:this.a})}lighten(e=10){const t=this.getHue(),n=this.getSaturation();let r=this.getLightness()+e/100;return r>1&&(r=1),this._c({h:t,s:n,l:r,a:this.a})}mix(e,t=50){const n=this._c(e),r=t/100,i=e=>(n[e]-this[e])*r+this[e],a={r:T(i("r")),g:T(i("g")),b:T(i("b")),a:T(100*i("a"))/100};return this._c(a)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const t=this._c(e),n=this.a+t.a*(1-this.a),r=e=>T((this[e]*this.a+t[e]*t.a*(1-this.a))/n);return this._c({r:r("r"),g:r("g"),b:r("b"),a:n})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const t=(this.r||0).toString(16);e+=2===t.length?t:"0"+t;const n=(this.g||0).toString(16);e+=2===n.length?n:"0"+n;const r=(this.b||0).toString(16);if(e+=2===r.length?r:"0"+r,"number"==typeof this.a&&this.a>=0&&this.a<1){const t=T(255*this.a).toString(16);e+=2===t.length?t:"0"+t}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),t=T(100*this.getSaturation()),n=T(100*this.getLightness());return 1!==this.a?`hsla(${e},${t}%,${n}%,${this.a})`:`hsl(${e},${t}%,${n}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return 1!==this.a?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,t,n){const r=this.clone();return r[e]=E(t,n),r}_c(e){return new this.constructor(e)}getMax(){return void 0===this._max&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return void 0===this._min&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const t=e.replace("#","");function n(e,n){return parseInt(t[e]+t[n||e],16)}t.length<6?(this.r=n(0),this.g=n(1),this.b=n(2),this.a=t[3]?n(3)/255:1):(this.r=n(0,1),this.g=n(2,3),this.b=n(4,5),this.a=t[6]?n(6,7)/255:1)}fromHsl({h:e,s:t,l:n,a:r}){if(this._h=e%360,this._s=t,this._l=n,this.a="number"==typeof r?r:1,t<=0){const e=T(255*n);this.r=e,this.g=e,this.b=e}let i=0,a=0,s=0;const o=e/60,c=(1-Math.abs(2*n-1))*t,u=c*(1-Math.abs(o%2-1));o>=0&&o<1?(i=c,a=u):o>=1&&o<2?(i=u,a=c):o>=2&&o<3?(a=c,s=u):o>=3&&o<4?(a=u,s=c):o>=4&&o<5?(i=u,s=c):o>=5&&o<6&&(i=c,s=u);const l=n-c/2;this.r=T(255*(i+l)),this.g=T(255*(a+l)),this.b=T(255*(s+l))}fromHsv({h:e,s:t,v:n,a:r}){this._h=e%360,this._s=t,this._v=n,this.a="number"==typeof r?r:1;const i=T(255*n);if(this.r=i,this.g=i,this.b=i,t<=0)return;const a=e/60,s=Math.floor(a),o=a-s,c=T(n*(1-t)*255),u=T(n*(1-t*o)*255),l=T(n*(1-t*(1-o))*255);switch(s){case 0:this.g=l,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=l;break;case 3:this.r=c,this.g=u;break;case 4:this.r=l,this.g=c;break;default:this.g=c,this.b=u}}fromHsvString(e){const t=H(e,D);this.fromHsv({h:t[0],s:t[1],v:t[2],a:t[3]})}fromHslString(e){const t=H(e,D);this.fromHsl({h:t[0],s:t[1],l:t[2],a:t[3]})}fromRgbString(e){const t=H(e,((e,t)=>t.includes("%")?T(e/100*255):e));this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}}var P=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function I(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function A(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(100*r)/100);var r}function L(e,t,n){var r;return r=n?e.v+.05*t:e.v-.15*t,r=Math.max(0,Math.min(1,r)),Math.round(100*r)/100}var z=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];z.primary=z[5];var R=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];R.primary=R[5];var V=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];V.primary=V[5];var F=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];F.primary=F[5];var Y=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Y.primary=Y[5];var B=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];B.primary=B[5];var W=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];W.primary=W[5];var q=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];q.primary=q[5];var U=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];U.primary=U[5];var J=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];J.primary=J[5];var Q=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Q.primary=Q[5];var X=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];X.primary=X[5];var Z=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Z.primary=Z[5];var G=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];G.primary=G[5];var K=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];K.primary=K[5];var ee=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];ee.primary=ee[5];var te=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];te.primary=te[5];var ne=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];ne.primary=ne[5];var re=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];re.primary=re[5];var ie=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];ie.primary=ie[5];var ae=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];ae.primary=ae[5];var se=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];se.primary=se[5];var oe=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];oe.primary=oe[5];var ce=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];ce.primary=ce[5];var ue=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];ue.primary=ue[5];var le=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];le.primary=le[5];const fe=(0,t.createContext)({});function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe="data-rc-order",ge="data-rc-priority",me=new Map;function be(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):"rc-util-key"}function ye(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function ve(e){return Array.from((me.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||!window.document||!window.document.createElement)return null;var n=t.csp,r=t.prepend,i=t.priority,a=void 0===i?0:i,s=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),o="prependQueue"===s,c=document.createElement("style");c.setAttribute(pe,s),o&&a&&c.setAttribute(ge,"".concat(a)),null!=n&&n.nonce&&(c.nonce=null==n?void 0:n.nonce),c.innerHTML=e;var u=ye(t),l=u.firstChild;if(r){if(o){var f=(t.styles||ve(u)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(pe)))return!1;var t=Number(e.getAttribute(ge)||0);return a>=t}));if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,l)}else u.appendChild(c);return c}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ye(t);return(t.styles||ve(n)).find((function(n){return n.getAttribute(be(t))===e}))}function _e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ye(n),i=ve(r),a=de(de({},n),{},{styles:i});!function(e,t){var n=me.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=xe("",t),i=r.parentNode;me.set(e,i),e.removeChild(r)}}(r,a);var s=we(t,a);if(s){var o,c,u;if(null!==(o=a.csp)&&void 0!==o&&o.nonce&&s.nonce!==(null===(c=a.csp)||void 0===c?void 0:c.nonce))s.nonce=null===(u=a.csp)||void 0===u?void 0:u.nonce;return s.innerHTML!==e&&(s.innerHTML=e),s}var l=xe(e,a);return l.setAttribute(be(a),t),l}function je(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}function Se(e){return function(e){return je(e)instanceof ShadowRoot}(e)?je(e):null}var $e={},Ce=[];function Oe(e,t){}function Me(e,t){}function ke(e,t,n){t||$e[n]||(e(!1,n),$e[n]=!0)}function Te(e,t){ke(Oe,e,t)}Te.preMessage=function(e){Ce.push(e)},Te.resetWarned=function(){$e={}},Te.noteOnce=function(e,t){ke(Me,e,t)};const He=Te;function De(e){return"object"===C(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===C(e.icon)||"function"==typeof e.icon)}function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r,i=e[n];if("class"===n)t.className=i,delete t.class;else delete t[n],t[(r=n,r.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=i;return t}),{})}function Ne(e,t,n){return n?r().createElement(e.tag,de(de({key:t},Ee(e.attrs)),n),(e.children||[]).map((function(n,r){return Ne(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):r().createElement(e.tag,de({key:t},Ee(e.attrs)),(e.children||[]).map((function(n,r){return Ne(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function Pe(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=new N(e),i=r.toHsv(),a=5;a>0;a-=1){var s=new N({h:I(i,a,!0),s:A(i,a,!0),v:L(i,a,!0)});n.push(s)}n.push(r);for(var o=1;o<=4;o+=1){var c=new N({h:I(i,o),s:A(i,o),v:L(i,o)});n.push(c)}return"dark"===t.theme?P.map((function(e){var r=e.index,i=e.amount;return new N(t.backgroundColor||"#141414").mix(n[r],i).toHexString()})):n.map((function(e){return e.toHexString()}))}(e)[0]}function Ie(e){return e?Array.isArray(e)?e:[e]:[]}var Ae=["icon","className","onClick","style","primaryColor","secondaryColor"],Le={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var ze=function(e){var n,r,i,a,s,o,c,u,l=e.icon,f=e.className,h=e.onClick,d=e.style,p=e.primaryColor,g=e.secondaryColor,m=k(e,Ae),b=t.useRef(),y=Le;if(p&&(y={primaryColor:p,secondaryColor:g||Pe(p)}),n=b,r=(0,t.useContext)(fe),i=r.csp,a=r.prefixCls,s=r.layer,o="\n.anticon {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",a&&(o=o.replace(/anticon/g,a)),s&&(o="@layer ".concat(s," {\n").concat(o,"\n}")),(0,t.useEffect)((function(){var e=Se(n.current);_e(o,"@ant-design-icons",{prepend:!s,csp:i,attachTo:e})}),[]),c=De(l),u="icon should be icon definiton, but got ".concat(l),He(c,"[@ant-design/icons] ".concat(u)),!De(l))return null;var v=l;return v&&"function"==typeof v.icon&&(v=de(de({},v),{},{icon:v.icon(y.primaryColor,y.secondaryColor)})),Ne(v.icon,"svg-".concat(v.name),de(de({className:f,onClick:h,style:d,"data-icon":v.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},m),{},{ref:b}))};ze.displayName="IconReact",ze.getTwoToneColors=function(){return de({},Le)},ze.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Le.primaryColor=t,Le.secondaryColor=n||Pe(t),Le.calculated=!!n};const Re=ze;function Ve(e){var t=$(Ie(e),2),n=t[0],r=t[1];return Re.setTwoToneColors({primaryColor:n,secondaryColor:r})}var Fe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Ve(U.primary);var Ye=t.forwardRef((function(e,n){var r=e.className,i=e.icon,a=e.spin,s=e.rotate,o=e.tabIndex,c=e.onClick,u=e.twoToneColor,l=k(e,Fe),f=t.useContext(fe),h=f.prefixCls,p=void 0===h?"anticon":h,g=f.rootClassName,m=d()(g,p,M(M({},"".concat(p,"-").concat(i.name),!!i.name),"".concat(p,"-spin"),!!a||"loading"===i.name),r),b=o;void 0===b&&c&&(b=-1);var y=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,v=$(Ie(u),2),x=v[0],w=v[1];return t.createElement("span",_({role:"img","aria-label":i.name},l,{ref:n,tabIndex:b,onClick:c,className:m}),t.createElement(Re,{icon:i,primaryColor:x,secondaryColor:w,style:y}))}));Ye.displayName="AntdIcon",Ye.getTwoToneColor=function(){var e=Re.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Ye.setTwoToneColor=Ve;const Be=Ye;var We=function(e,n){return t.createElement(Be,_({},e,{ref:n,icon:j}))};const qe=t.forwardRef(We);const Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"};var Je=function(e,n){return t.createElement(Be,_({},e,{ref:n,icon:Ue}))};const Qe=t.forwardRef(Je);const Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 00-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4 20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3 40.4-23.5 65.5-66.1 65.5-111 0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 01-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0133.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5 21.9 19a56.76 56.76 0 0119.6 43c0 19.1-11 37.5-28.8 48.4z"}}]},name:"dislike",theme:"outlined"};var Ze=function(e,n){return t.createElement(Be,_({},e,{ref:n,icon:Xe}))};const Ge=t.forwardRef(Ze);function Ke(n){const{title:r,overflowClass:i,children:a,...s}=n,o=(0,t.useRef)(null),[c,u]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{if(!o||!o.current)return;const e=o.current;e.scrollHeight>e.clientHeight&&u(!0)}),[]),i?(0,e.jsx)(p.Tooltip,{title:c?r:null,...s,children:(0,e.jsx)("span",{title:r,ref:o,className:i,children:a})}):(0,e.jsx)(p.Tooltip,{title:r,...s,children:a})}const{Text:et}=p.Typography;function tt(n){const{app:r,data:i,value:a,onChange:s}=n,[o,c]=(0,t.useState)((l(u=i.vote)?u:parseInt(u,10))||0);var u;const f=a.includes(i.id),h=e=>{const t=e?o+1:o-1;r.fetch("feedback/update",{data:{id:i.id,vote:t}}).then((()=>{const e=[...a,i.id];e.length>40&&e.shift(),s(e),c(t)})).catch((e=>{r.error(e&&e.message?e.message:e)}))};return(0,e.jsxs)(p.Space,{align:"start",children:[(0,e.jsx)(Ke,{title:f?r.i18n("voted"):void 0,children:(0,e.jsxs)(p.Space,{size:0,align:"center",direction:"vertical",children:[(0,e.jsx)(p.Button,{size:"small",disabled:f,onClick:()=>{h(!0)},icon:(0,e.jsx)(Qe,{})}),(0,e.jsx)(et,{children:o}),o>0&&(0,e.jsx)(p.Button,{size:"small",disabled:f,onClick:()=>{h(!1)},icon:(0,e.jsx)(Ge,{})})]})}),(0,e.jsx)(Ke,{title:i.desc,overflowClass:"table-cell",children:i.desc})]})}function nt(n){const{value:r,password:i,defaultValue:a,onChange:s,focusOnEnter:o,...c}=n,u=(0,t.useRef)(null),l=(0,t.useRef)(null),[f,h]=(0,t.useState)(r||a),d=e=>{h(e.target.value),u.current&&(clearTimeout(u.current),u.current=null),u.current=setTimeout((()=>{s&&s(e.target.value)}),600)};return(0,t.useEffect)((()=>{o&&l&&l.current&&setTimeout((()=>{l.current&&l.current.focus&&l.current.focus()}),1e3)}),[o]),i?(0,e.jsx)(p.Input.Password,{...c,ref:l,value:f,onChange:d}):(0,e.jsx)(p.Input,{...c,ref:l,value:f,onChange:d})}function rt(){const{me:e,app:n,container:r}=a(),[i,s]=(0,t.useState)(n.user),o=(0,t.useRef)(n.user.is_logged_in),c=e=>{const t=[];return["member","premium"].forEach((n=>{e.roles.includes(n)&&t.push(n)})),(t.length>0?n.fetch("expire/get",{query:{roles:t.join(",")},headers:{"X-Circle-App":"reader","X-Circle-Lang":n.lang,"X-Circle-Version":n.version,"X-Circle-Token":`${e.access_token}*&~!${e.uid}`}}):Promise.resolve({member:0,premium:0})).then((t=>(n.fire("user_refresh",Object.assign(Object.assign({},e),t)),Promise.resolve(!0))))};return(0,t.useEffect)((()=>{const e=[];return e.push(n.on("tab_activated",(()=>{n.syncUser().then((()=>{s(Object.assign({},n.user))}))}))),e.push(n.on("user_refresh",(e=>{n.syncUser(e).then((e=>{s(Object.assign({},e))}))}))),()=>{e.forEach((e=>{e()}))}}),[]),(0,t.useEffect)((()=>{if(o.current===i.is_logged_in)return;o.current=i.is_logged_in;const e=i.roles.filter((e=>["member","premium"].includes(e))),t=e.join("_")||"expired";n.field(t)||(n.field(t,!0),n.fire("expired",e.length<=0,(()=>{n.field(t,"destory")})))}),[i.is_logged_in]),{me:e,app:n,user:i,login:e=>n.syncUser(Object.assign(Object.assign({},n.user),{access_token:""})).then((()=>n.fetch("circle/login",{data:e}).then(c))),logout:()=>(n.fire("user_refresh",{uid:i.uid,roles:[],access_token:""}),Promise.resolve(!0)),register:e=>n.syncUser(Object.assign(Object.assign({},n.user),{access_token:""})).then((()=>n.fetch("circle/register",{data:e}).then(c))),container:r,resetPassowrd:e=>n.fetch("circle/password",{data:e}).then(c),updateProfile:e=>n.fetch("circle/profile",{data:e}).then(c)}}function it(e){if(c(e))return e;try{return JSON.stringify(e)}catch(t){return e.toString()}}function at(){const{user:e}=rt(),{me:n,app:r,data:i,start:s,limit:o,search:c,loading:u,refetch:l,onPager:f,onSearch:h}=function(e){const{uri:n,query:r,defaultLimit:i=10}=e,{me:s,app:o,container:c}=a(),[u,l]=(0,t.useState)(1),[f,h]=(0,t.useState)(""),[d,p]=(0,t.useState)(i),[g,m]=(0,t.useState)(!1),[b,y]=(0,t.useState)({total:0,items:[]}),v=()=>{m(!0),o.fetch(n,{query:Object.assign(Object.assign({},r),{limit:d,start:u,search:f})}).then(y).catch((e=>{o.error(e&&e.message?e.message:e)})).finally((()=>{m(!1)}))};return(0,t.useEffect)(v,[it(Object.assign(Object.assign({},r),{limit:d,start:u,search:f}))]),{me:s,app:o,data:b,start:u,limit:d,search:f,loading:g,refetch:v,onPager:(e,t)=>{l(e),p(t)},onSearch:e=>{l(1),h(e)},container:c}}({uri:"feedback/list",query:{order:"vote"}});return{me:n,app:r,user:e,data:i,start:s,limit:o,search:c,loading:u,refetch:l,onPager:f,onSearch:h,myFeedback:()=>{r.fire(n.id),r.fire("account","feedback")}}}function st(){const{value:n,onChange:r}=function(e){const{id:n,table:r="option",disabled:i,defaultValue:s}=e,{app:c,me:u,container:l}=a(),[h,d]=(0,t.useState)(s),p=()=>{i||c.get(n,r).then((e=>{!o(e)&&d(e)}))};return(0,t.useEffect)(p,[n]),{me:u,app:c,value:h,refetch:p,setValue:d,onChange:(e,t)=>{i||o(e)||(e!==s?c.set(n,e,r).then((()=>{d(e),f(t)&&t()})).catch((e=>{console.error(e),f(t)&&t(e.message)})):c.remove(n,r).then((()=>{d(e),f(t)&&t()})).catch((e=>{console.error(e),f(t)&&t(e.message)})))},container:l}}({id:"vote",defaultValue:[]}),{app:i,user:s,data:c,start:u,limit:l,search:h,loading:d,onPager:g,onSearch:m,myFeedback:b}=at();return(0,e.jsxs)("div",{children:[(0,e.jsxs)(p.Space,{className:"flex",children:[(0,e.jsx)(p.Tooltip,{title:s.is_logged_in?void 0:i.i18n("login_first"),children:(0,e.jsx)(p.Button,{size:"small",type:"primary",onClick:b,disabled:!s.is_logged_in,children:i.i18n("my_feedback")})}),(0,e.jsx)(nt,{size:"small",value:h,onChange:m,style:{width:240},placeholder:i.i18n("search_placeholder")})]}),(0,e.jsx)(p.Table,{loading:d,dataSource:c.items,scroll:{y:w()},locale:{emptyText:(0,e.jsx)(p.Empty,{description:i.i18n("empty"),image:p.Empty.PRESENTED_IMAGE_SIMPLE})},pagination:{size:"small",simple:!0,current:u,pageSize:l,total:c.total,onChange:g,showQuickJumper:!0,position:["bottomCenter"],showSizeChanger:c.total>l,locale:{page:i.i18n("page"),jump_to:i.i18n("jump"),items_per_page:i.i18n("page")}},columns:[{dataIndex:"desc",title:i.i18n("desc"),render:(t,a)=>(0,e.jsx)(tt,{app:i,data:a,value:n,onChange:r})},{width:"20%",dataIndex:"status",title:i.i18n("status"),render:(t,n)=>{const r=function(e,t){switch(e){case"resolve":return{label:t.i18n("resolve"),color:"cyan"};case"rejected":return{label:t.i18n("rejected"),color:"warning"};case"progress":return{label:t.i18n("progress"),color:"processing"};case"done":return{label:t.i18n("done"),color:"success"};case"release":return{label:t.i18n("release"),color:"purple"};case"duplicate":return{label:t.i18n("reproduce"),color:"volcano"};case"reproduce":return{label:t.i18n("reproduce"),color:"error"};default:return{label:t.i18n("pending"),color:"default"}}}(t,i);return n.reply?(0,e.jsx)(p.Tooltip,{title:n.reply,children:(0,e.jsx)(p.Tag,{color:r.color,children:(0,e.jsxs)(p.Space,{size:3,children:[(0,e.jsx)("span",{children:r.label}),(0,e.jsx)(qe,{})]})})}):(0,e.jsx)(p.Tag,{color:r.color,children:r.label})}},{width:"25%",dataIndex:"create",title:i.i18n("time"),render:e=>x()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}]})]})}function ot(e=location.href){if(/circle=/.test(e)){const[t,n=""]=e.split("#");if(!n)return e;const{hashs:r}=function(e,t,n=location.hash.substring(1).split("&")){let r=[];if(n.join("").length<=0)return{hashs:[],hash:r};const i=Array.isArray(e)?e:[e],a=n.filter((e=>{if(i.findIndex((t=>e.indexOf(t)>=0))<0)return!0;r.push(e)}));if(t){const n=`${e}=${t}`;a.push(n),r=[],r.push(n)}return{hashs:a,hash:r}}(["circle","widget"],void 0,n.split("&"));return`${t}${r.length>0?"#"+r.join("&"):""}`}return e}function ct(){const{app:n,user:r,form:i,loading:a,onLogin:s,onFinish:o}=function(){const[e]=p.Form.useForm(),{me:n,app:r,user:i}=rt(),[a,s]=(0,t.useState)(!1);return{me:n,app:r,user:i,form:e,loading:a,onLogin:()=>{r.fire("account","login",(()=>{r.fire("account")}))},onFinish:t=>{s(!0),r.fetch("feedback/generate",{data:{vote:0,uri:ot(),env:r.type,status:"pending",desc:t.desc,type:t.type,version:r.version,useragent:navigator.userAgent}}).then((()=>{e.resetFields();const t=r.data(n.id);f(t)?(r.data(n.id,"destory"),t()):r.success("submit_success")})).catch((e=>{r.error(e&&e.message?e.message:e)})).finally((()=>{s(!1)}))}}}(),c=function(e){return{bug:e.i18n("bug"),propose:e.i18n("propose"),design:e.i18n("design"),error:e.i18n("error"),other:e.i18n("other")}}(n);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(p.Button,{block:!0,type:"link",target:"_blank",href:n.path("docs/faq.html"),style:{marginTop:40,whiteSpace:"break-spaces"},children:n.i18n("faq")}),(0,e.jsxs)(p.Form,{form:i,name:"report",onFinish:o,className:"form-wrapper",children:[(0,e.jsx)(p.Form.Item,{name:"type",rules:[{required:!0,message:n.i18n("choose_type")}],children:(0,e.jsx)(p.Select,{placeholder:n.i18n("type"),disabled:!r.is_logged_in,options:Object.keys(c).map((e=>({value:e,label:c[e]})))})}),(0,e.jsx)(p.Form.Item,{name:"desc",rules:[{required:!0,message:n.i18n("input_feedback")}],children:(0,e.jsx)(p.Input.TextArea,{rows:5,showCount:!0,maxLength:300,autoComplete:"off",disabled:!r.is_logged_in,placeholder:n.i18n("feedback")})}),(0,e.jsx)(p.Form.Item,{children:r.is_logged_in?(0,e.jsx)(p.Button,{block:!0,type:"primary",htmlType:"submit",loading:a,children:n.i18n("submit")}):(0,e.jsx)(p.Button,{block:!0,type:"primary",onClick:s,children:n.i18n("login_first")})})]})]})}function ut(){const{me:n,app:r}=a(),[i,s]=(0,t.useState)("report"),o=[{key:"report",label:r.i18n("report"),children:(0,e.jsx)(ct,{})},{key:"hot_report",label:r.i18n("hot_report"),children:(0,e.jsx)(st,{})}];return(0,t.useEffect)((()=>r.on(`${n.id}_route`,(e=>{s(e||"report")}))),[]),(0,t.useEffect)((()=>{o.find((e=>e.key===i))||s(o[0].key)}),[i,o.length]),(0,e.jsx)(p.Tabs,{items:o,activeKey:i,onChange:s})}function lt(){const{me:n,app:r}=a();return(0,t.useEffect)((()=>{r.fire("display")}),[]),location.hash.indexOf("mid=feedback")>=0?(0,e.jsx)("div",{className:"outside-tab",children:(0,e.jsx)("div",{className:"inside-tab",children:(0,e.jsx)(ut,{})})}):(0,e.jsx)(y,{id:n.id,width:800,type:"modal",footer:null,className:"wrapper",maskClosable:!1,onChange:(e,t,i)=>{if(!e)return t?(r.fire(`${n.id}_route`,t,i),!0):void 0;t?f(i)?(r.data(n.id,i),r.fire(`${n.id}_route`,t)):r.fire(`${n.id}_route`,t,i):r.fire(`${n.id}_route`,"report")},onVisible:e=>{r.fire("scrollable",!e)},children:(0,e.jsx)(ut,{})})}window.definePlugin("feedback",(function(t,n,r){let a=null;return{start(){a||(a=r.display.render((({root:a,shadow:s,container:o})=>({app:n,me:t,children:(0,e.jsx)(lt,{}),provider:(0,e.jsx)(i.Provider,{value:{app:n,root:a,shadow:s,container:o,me:t,dependencies:r}})})),{style:".ant-space.flex {\n  display: flex;\n  margin-bottom: 8px;\n  justify-content: space-between;\n}\n.table-cell {\n  max-width: 360px;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n}\n\n.ant-form.form-wrapper {\n  max-width: 460px;\n  margin: 20px auto 60px;\n}\n.ant-form.form-wrapper .ant-form-item:last-child {\n  margin-bottom: 0;\n}\n\n.container {\n  user-select: none;\n}\n.container .ant-modal.wrapper .ant-modal-content {\n  padding-top: 3px;\n  padding-bottom: 2px;\n  min-height: 460px;\n}\n.container .ant-tabs-top > .ant-tabs-nav {\n  margin-bottom: 8px;\n}\n.outside-tab {\n  background: var(--canvas);\n  padding: 80px 0;\n}\n.outside-tab .inside-tab {\n  min-height: 80vh;\n  max-width: 1000px;\n  border-radius: 10px;\n  padding: 7px 20px;\n  margin: 0 auto;\n  background: var(--bg);\n}\n\n.ant-drawer.popup-toolbar {\n  height: auto;\n  bottom: auto;\n  left: auto;\n}\n.ant-drawer.popup-toolbar .ant-drawer-content-wrapper {\n  height: auto !important;\n  width: auto !important;\n  position: static !important;\n}\n.ant-drawer.popup-toolbar .ant-drawer-content {\n  flex-direction: row-reverse;\n  align-items: start;\n}\n.ant-drawer.popup-toolbar .ant-drawer-header-close-only {\n  padding: 16px;\n  border: 0;\n}\n.ant-drawer.popup-toolbar .ant-drawer-header-close-only .ant-drawer-close {\n  margin-right: 0;\n}\n\n.mobile .ant-drawer.popup-toolbar .ant-drawer-content-wrapper {\n  overflow: auto;\n  max-height: 100vh !important;\n  width: 100vw !important;\n}\n\n",...n.applyFilter(`shadow_props_${t.id}`,{})}))},destory(){a&&(a(),a=null)}}}))})()})();