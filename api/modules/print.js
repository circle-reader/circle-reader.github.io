(()=>{"use strict";function e(e){return e&&e.nodeType&&1===e.nodeType}window.definePlugin("print",(function(t,n){const r=[],i=window.matchMedia("print");return n.fire("insert_style",["html[data-circlereader-print]{scrollbar-width:none;--circle-track-width:0;}","html[data-circlereader-print]::-webkit-scrollbar{width:0px;}"].join("")),{onSelf(e){e.fire("print_change",!0),setTimeout((()=>{window.print()}),1e3)},start(e){if(navigator.userAgent.indexOf("Firefox")>=0){const t={name:"afterprint",factory:()=>{window.addEventListener("focus",(function t(){window.removeEventListener("focus",t),e.fire("print_change",!1)}))}};r.push(t),window.addEventListener(t.name,t.factory)}else{const t={name:"change",factory:t=>{t.matches||e.fire("print_change",!1)}};r.push(t),i.addEventListener(t.name,t.factory)}},destory(){!function(e,t){if(!e)return;let n=0;if(e.forEach){const r=e.length;if(r<=0)return;for(;n<r&&!t(e[n],n);)n++}else{const r=Object.keys(e),i=r.length;if(i<=0)return;for(;n<i&&!t(e[r[n]],r[n]);)n++}}(r,(({name:e,factory:t})=>{"change"===e?i.removeEventListener(e,t):window.removeEventListener(e,t)}))},onPrintChange(t,n){n?document.documentElement.setAttribute("data-circlereader-print","true"):document.documentElement.removeAttribute("data-circlereader-print");if(!t.config.slogan){if(!n){const n=t.field("container");if(!e(n))return;if(!e(n.querySelector(".copyright")))return;!function(e,t,n){e.get("alert").then((r=>{r?t&&t(!0):e.fire("notice",{duration:5,onClose:t,message:e.i18n("alert"),btnText:n||e.i18n("got_it")},(()=>{e.set("alert",!0)}))}))}(t,(e=>{e||t.fire("setting","display","render_display")}))}return}const r=document.head.querySelector("title");if(r&&e(r))if(n){const e=r.dataset.id||"";e.length>0&&(r.innerText=e)}else{const e=r.innerText||"";e.length>0&&(r.dataset.id=e,r.innerText=`${e} - ${t.i18n("name")}`)}}}}))})();