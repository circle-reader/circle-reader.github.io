(()=>{"use strict";var e={442:function(e){e.exports=function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=n,this.iframes=r,this.exclude=o,this.iframesTimeout=i}return n(e,[{key:"getContexts",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach((function(t){var n=e.filter((function(e){return e.contains(t)})).length>0;-1!==e.indexOf(t)||n||e.push(t)})),e}},{key:"getIframeContents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=void 0;try{var o=e.contentWindow;if(r=o.document,!o||!r)throw new Error("iframe inaccessible")}catch(e){n()}r&&t(r)}},{key:"isIframeBlank",value:function(e){var t="about:blank",n=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&n!==t&&n}},{key:"observeIframeLoad",value:function(e,t,n){var r=this,o=!1,i=null,a=function a(){if(!o){o=!0,clearTimeout(i);try{r.isIframeBlank(e)||(e.removeEventListener("load",a),r.getIframeContents(e,t,n))}catch(e){n()}}};e.addEventListener("load",a),i=setTimeout(a,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,n){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch(e){n()}}},{key:"waitForIframes",value:function(e,t){var n=this,r=0;this.forEachIframe(e,(function(){return!0}),(function(e){r++,n.waitForIframes(e.querySelector("html"),(function(){--r||t()}))}),(function(e){e||t()}))}},{key:"forEachIframe",value:function(t,n,r){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=t.querySelectorAll("iframe"),s=a.length,c=0;a=Array.prototype.slice.call(a);var l=function(){--s<=0&&i(c)};s||l(),a.forEach((function(t){e.matches(t,o.exclude)?l():o.onIframeReady(t,(function(e){n(t)&&(c++,r(e)),l()}),l)}))}},{key:"createIterator",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,n){if(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:(null===t||e.nextNode())&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,n,r){var o=!1,i=!1;return r.forEach((function(e,t){e.val===n&&(o=t,i=e.handled)})),this.compareNodeIframe(e,t,n)?(!1!==o||i?!1===o||i||(r[o].handled=!0):r.push({val:n,handled:!0}),!0):(!1===o&&r.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,n,r){var o=this;e.forEach((function(e){e.handled||o.getIframeContents(e.val,(function(e){o.createInstanceOnIframe(e).forEachNode(t,n,r)}))}))}},{key:"iterateThroughNodes",value:function(e,t,n,r,o){for(var i=this,a=this.createIterator(t,e,r),s=[],c=[],l=void 0,u=void 0,d=function(){var e=i.getIteratorNode(a);return u=e.prevNode,l=e.node};d();)this.iframes&&this.forEachIframe(t,(function(e){return i.checkIframeFilter(l,u,e,s)}),(function(t){i.createInstanceOnIframe(t).forEachNode(e,(function(e){return c.push(e)}),r)})),c.push(l);c.forEach((function(e){n(e)})),this.iframes&&this.handleOpenIframes(s,e,n,r),o()}},{key:"forEachNode",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=this.getContexts(),a=i.length;a||o(),i.forEach((function(i){var s=function(){r.iterateThroughNodes(e,i,t,n,(function(){--a<=0&&o()}))};r.iframes?r.waitForIframes(i,s):s()}))}}],[{key:"matches",value:function(e,t){var n="string"==typeof t?[t]:t,r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(r){var o=!1;return n.every((function(t){return!r.call(e,t)||(o=!0,!1)})),o}return!1}}]),e}(),i=function(){function i(e){t(this,i),this.ctx=e,this.ie=!1;var n=window.navigator.userAgent;(n.indexOf("MSIE")>-1||n.indexOf("Trident")>-1)&&(this.ie=!0)}return n(i,[{key:"log",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",r=this.opt.log;this.opt.debug&&"object"===(void 0===r?"undefined":e(r))&&"function"==typeof r[n]&&r[n]("mark.js: "+t)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?"":"i",r=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var o in t)if(t.hasOwnProperty(o)){var i=t[o],a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(o):this.escapeStr(o),s="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i);""!==a&&""!==s&&(e=e.replace(new RegExp("("+this.escapeStr(a)+"|"+this.escapeStr(s)+")","gm"+n),r+"("+this.processSynomyms(a)+"|"+this.processSynomyms(s)+")"+r))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,(function(e){return"\\"===e.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(e){return"\\"===e.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,(function(e,t,n){var r=n.charAt(t+1);return/[(|)\\]/.test(r)||""===r?e:e+"\0"}))}},{key:"createJoinersRegExp",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",n=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],r=[];return e.split("").forEach((function(o){n.every((function(n){if(-1!==n.indexOf(o)){if(r.indexOf(n)>-1)return!1;e=e.replace(new RegExp("["+n+"]","gm"+t),"["+n+"]"),r.push(n)}return!0}))})),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,n="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",r=this.opt.accuracy,o="string"==typeof r?r:r.value,i="string"==typeof r?[]:r.limiters,a="";switch(i.forEach((function(e){a+="|"+t.escapeStr(e)})),o){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(a="\\s"+(a||this.escapeStr(n)))+"]*"+e+"[^"+a+"]*)";case"exactly":return"(^|\\s"+a+")("+e+")(?=$|\\s"+a+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,n=[];return e.forEach((function(e){t.opt.separateWordSearch?e.split(" ").forEach((function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)})):e.trim()&&-1===n.indexOf(e)&&n.push(e)})),{keywords:n.sort((function(e,t){return t.length-e.length})),length:n.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var n=[],r=0;return e.sort((function(e,t){return e.start-t.start})).forEach((function(e){var o=t.callNoMatchOnInvalidRanges(e,r),i=o.start,a=o.end;o.valid&&(e.start=i,e.length=a-i,n.push(e),r=a)})),n}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var n=void 0,r=void 0,o=!1;return e&&void 0!==e.start?(r=(n=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&r-t>0&&r-n>0?o=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:r,valid:o}}},{key:"checkWhitespaceRanges",value:function(e,t,n){var r=void 0,o=!0,i=n.length,a=t-i,s=parseInt(e.start,10)-a;return(r=(s=s>i?i:s)+parseInt(e.length,10))>i&&(r=i,this.log("End range automatically set to the max value of "+i)),s<0||r-s<0||s>i||r>i?(o=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===n.substring(s,r).replace(/\s+/g,"")&&(o=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:s,end:r,valid:o}}},{key:"getTextNodes",value:function(e){var t=this,n="",r=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(e){r.push({start:n.length,end:(n+=e.textContent).length,node:e})}),(function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){e({value:n,nodes:r})}))}},{key:"matchesExclude",value:function(e){return o.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,n){var r=this.opt.element?this.opt.element:"mark",o=e.splitText(t),i=o.splitText(n-t),a=document.createElement(r);return a.setAttribute("data-markjs","true"),this.opt.className&&a.setAttribute("class",this.opt.className),a.textContent=o.textContent,o.parentNode.replaceChild(a,o),i}},{key:"wrapRangeInMappedTextNode",value:function(e,t,n,r,o){var i=this;e.nodes.every((function(a,s){var c=e.nodes[s+1];if(void 0===c||c.start>t){if(!r(a.node))return!1;var l=t-a.start,u=(n>a.end?a.end:n)-a.start,d=e.value.substr(0,a.start),h=e.value.substr(u+a.start);if(a.node=i.wrapRangeInTextNode(a.node,l,u),e.value=d+h,e.nodes.forEach((function(t,n){n>=s&&(e.nodes[n].start>0&&n!==s&&(e.nodes[n].start-=u),e.nodes[n].end-=u)})),n-=u,o(a.node.previousSibling,a.start),!(n>a.end))return!1;t=a.end}return!0}))}},{key:"wrapMatches",value:function(e,t,n,r,o){var i=this,a=0===t?0:t+1;this.getTextNodes((function(t){t.nodes.forEach((function(t){t=t.node;for(var o=void 0;null!==(o=e.exec(t.textContent))&&""!==o[a];)if(n(o[a],t)){var s=o.index;if(0!==a)for(var c=1;c<a;c++)s+=o[c].length;t=i.wrapRangeInTextNode(t,s,s+o[a].length),r(t.previousSibling),e.lastIndex=0}})),o()}))}},{key:"wrapMatchesAcrossElements",value:function(e,t,n,r,o){var i=this,a=0===t?0:t+1;this.getTextNodes((function(t){for(var s=void 0;null!==(s=e.exec(t.value))&&""!==s[a];){var c=s.index;if(0!==a)for(var l=1;l<a;l++)c+=s[l].length;var u=c+s[a].length;i.wrapRangeInMappedTextNode(t,c,u,(function(e){return n(s[a],e)}),(function(t,n){e.lastIndex=n,r(t)}))}o()}))}},{key:"wrapRangeFromIndex",value:function(e,t,n,r){var o=this;this.getTextNodes((function(i){var a=i.value.length;e.forEach((function(e,r){var s=o.checkWhitespaceRanges(e,a,i.value),c=s.start,l=s.end;s.valid&&o.wrapRangeInMappedTextNode(i,c,l,(function(n){return t(n,e,i.value.substring(c,l),r)}),(function(t){n(t,e)}))})),r()}))}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression "'+e+'"');var r=0,o="wrapMatches",i=function(e){r++,n.opt.each(e)};this.opt.acrossElements&&(o="wrapMatchesAcrossElements"),this[o](e,this.opt.ignoreGroups,(function(e,t){return n.opt.filter(t,e,r)}),i,(function(){0===r&&n.opt.noMatch(e),n.opt.done(r)}))}},{key:"mark",value:function(e,t){var n=this;this.opt=t;var r=0,o="wrapMatches",i=this.getSeparatedKeywords("string"==typeof e?[e]:e),a=i.keywords,s=i.length,c=this.opt.caseSensitive?"":"i",l=function e(t){var i=new RegExp(n.createRegExp(t),"gm"+c),l=0;n.log('Searching with expression "'+i+'"'),n[o](i,1,(function(e,o){return n.opt.filter(o,t,r,l)}),(function(e){l++,r++,n.opt.each(e)}),(function(){0===l&&n.opt.noMatch(t),a[s-1]===t?n.opt.done(r):e(a[a.indexOf(t)+1])}))};this.opt.acrossElements&&(o="wrapMatchesAcrossElements"),0===s?this.opt.done(r):l(a[0])}},{key:"markRanges",value:function(e,t){var n=this;this.opt=t;var r=0,o=this.checkRanges(e);o&&o.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(o)),this.wrapRangeFromIndex(o,(function(e,t,r,o){return n.opt.filter(e,t,r,o)}),(function(e,t){r++,n.opt.each(e,t)}),(function(){n.opt.done(r)}))):this.opt.done(r)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+="."+this.opt.className),this.log('Removal selector "'+n+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(e){t.unwrapMatches(e)}),(function(e){var r=o.matches(e,n),i=t.matchesExclude(e);return!r||i?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(e){this._opt=r({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new o(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),i}();function a(e){var t=this,n=new i(e);return this.mark=function(e,r){return n.mark(e,r),t},this.markRegExp=function(e,r){return n.markRegExp(e,r),t},this.markRanges=function(e,r){return n.markRanges(e,r),t},this.unmark=function(e){return n.unmark(e),t},this}return a}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=ReactJsxRuntime,o=React,i=(0,o.createContext)({});function a(){return(0,o.useContext)(i)}function s(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function c(e){return s(e,"Undefined")}function l(e){return e&&e.nodeType&&1===e.nodeType}function u(e){return s(e,"Function")}const d=classNames;var h=n.n(d);const p=Antd;var f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function g(e){const{type:t,width:n,children:o,placement:i,onCancel:s,className:c,rootClassName:l}=e,u=f(e,["type","width","children","placement","onCancel","className","rootClassName"]),{app:d}=a();return"toolbar"===t?(0,r.jsx)(p.Drawer,Object.assign({styles:{body:{padding:0}}},u,{mask:!1,width:n,onClose:s,className:c,rootClassName:h()("popup-toolbar",l),placement:d.device.phone?"bottom":i,children:o})):"modal"===t?(0,r.jsx)(p.Modal,Object.assign({},u,{onCancel:s,rootClassName:l,width:d.device.phone?"90%":n,className:h()(c,"popup-modal"),children:o})):(0,r.jsx)(p.Drawer,Object.assign({},u,{onClose:s,className:c,width:d.device.phone?"100%":n,rootClassName:h()("popup-drawer",l),placement:d.device.phone?"bottom":i,children:o}))}var v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function m(e){const{id:t,type:n,onCancel:i,onChange:c,onVisible:u,children:d,width:h=378,placement:p="right",destoryWithRender:f=!0}=e,m=v(e,["id","type","onCancel","onChange","onVisible","children","width","placement","destoryWithRender"]),y=(0,o.useRef)("0px"),x=(0,o.useRef)(null),{me:w,app:b,container:k}=a(),[E,S]=(0,o.useState)(!1),[I,N]=(0,o.useState)(8e3);return(0,o.useEffect)((()=>{const e=[];function r(e){if(e){const e=b.field("container");if(l(e)){const t=e.style.getPropertyValue("--offsetright");t&&(y.current=t)}b.fire("display",!0,"0px","offsetright"),k.style.display="none"}else b.fire("display",!0,y.current||"0px","offsetright"),y.current="",k.style.removeProperty("display")}return e.push(b.on("screenshot_change",r)),e.push(b.on("print_change",r)),e.push(b.on(t,((...e)=>{S((t=>{if(c){e.unshift(!t);if(c.apply(b,e))return t}return t||N((e=>{let t=e+10;const n=b.field("zIndex");return s(n,"Number")&&(t=n+10),b.field("zIndex",t),t})),u&&u(!t),!t}))}))),e.push(b.on(`${w.id}_enable`,(()=>{if(!b.device.phone&&!n){const e=b.field("container");if(l(e)){const t=e.style.getPropertyValue("--offsetright");t&&b.fire("display",!0,t,`offset${p}`)}}}))),()=>{e.forEach((e=>{e()}))}}),[]),(0,o.useEffect)((()=>{x.current&&clearTimeout(x.current),x.current=setTimeout((()=>{if(E){if(!b.device.phone&&!n){const e=b.field("container");if(l(e)){const t=e.style.getPropertyValue("--offsetright");t&&(y.current=t)}b.fire("display",!0,`${h}px`,`offset${p}`)}}else b.device.phone||n||b.fire("display",!0,y.current||"0px",`offset${p}`);b.fire("toolbar_state",t,E?"active":"inactive")}),500)}),[h,E]),(0,o.useEffect)((()=>b.on("render_leave",(()=>{f&&(u&&u(!1),S(!1))}))),[f]),(0,r.jsx)(g,Object.assign({type:n,open:E,width:h,zIndex:I,onCancel:e=>{u&&u(!1),S(!1),i&&i(e)},placement:p},m,{children:d}))}const y=AntDesignIcons;function x(e){const{value:t,onChange:n,onPressEnter:i}=e,{app:s}=a(),c=(0,o.useRef)(null);return(0,o.useEffect)((()=>s.on("drawer_find_change",(function(e){if(c&&c.current)if(e){const e=s.data("here");e&&(s.data("here","destory"),n&&n(e)),setTimeout((function(){c.current.focus({cursor:"end"})}),1e3)}else c.current.blur()}))),[]),(0,r.jsx)(p.Input,{allowClear:!0,value:t,ref:c,onChange:e=>{n&&n(e.target.value)},prefix:(0,r.jsx)(y.SearchOutlined,{}),onPressEnter:e=>{e.preventDefault(),e.stopPropagation(),i&&i(e.target.value)},placeholder:s.i18n("enter_keyword")})}function w(e){const{app:t,value:n,onChange:o}=e;return(0,r.jsx)(p.Checkbox.Group,{value:n,onChange:o,style:{display:"block",marginLeft:-15},children:(0,r.jsx)(p.List,{size:"small",split:!1,bordered:!1,dataSource:[{title:t.i18n("separateword"),value:"separateWord"},{title:t.i18n("casesensitive"),value:"caseSensitive"},{title:t.i18n("diacritics"),value:"diacritics"},{title:t.i18n("wildcards"),value:"wildcards"},{title:t.i18n("accuracy"),value:"accuracy"}],renderItem:e=>(0,r.jsx)(p.List.Item,{children:(0,r.jsx)(p.Checkbox,{value:e.value,children:e.title})},e.value)})})}var b=n(442),k=n.n(b);function E(e){const[t,n]=(0,o.useState)(0),[r,i]=(0,o.useState)([]),[s,d]=(0,o.useState)(""),h=e.field("container"),p=new(k())(h),[f,g]=(0,o.useState)(["diacritics","accuracy"]),{me:v,value:m,onChange:y}=function(e){const{id:t,table:n="option",disabled:r,defaultValue:i}=e,{app:s,me:l,container:d}=a(),[h,p]=(0,o.useState)(i),f=()=>{r||s.get(t,n).then((e=>{!c(e)&&p(e)}))};return(0,o.useEffect)(f,[t]),{me:l,app:s,value:h,refetch:f,setValue:p,onChange:(e,o)=>{r||c(e)||(e!==i?s.set(t,e,n).then((()=>{p(e),u(o)&&o()})).catch((e=>{console.error(e),u(o)&&o(e.message)})):s.remove(t,n).then((()=>{p(e),u(o)&&o()})).catch((e=>{console.error(e),u(o)&&o(e.message)})))},container:d}}({id:"filter",defaultValue:!0}),x=r.length<=0,w=(e,t="find")=>{const n=l(e);!function(e,t){if(!e)return;let n=0;if(e.forEach){const r=e.length;if(r<=0)return;for(;n<r&&!t(e[n],n);)n++}else{const r=Object.keys(e),o=r.length;if(o<=0)return;for(;n<o&&!t(e[r[n]],r[n]);)n++}}(h.querySelectorAll(`.${t}`),(r=>{n?r!==e&&r.classList.remove(t):r.classList.remove(t)})),e&&n&&!e.classList.contains(t)&&e.classList.add(t)},b=e=>{if(r.length<=0)return;let o=0;const i=e?t-1:t+1,a=r.length-1;o=i<0?a:i>a?0:i;const s=r[o];s&&(n(o),w(s),function(e,t){l(e)&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded(t):e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"center",inline:t?"center":"nearest"}))}(s))};return(0,o.useEffect)((()=>e.on(`${v.id}_destory`,(()=>{p.unmark(),w(void 0,"find-block"),n(0),i([]),d("")}))),[]),(0,o.useEffect)((()=>e.on(`${v.id}_with`,(function(){const t=e.data("here")||"";t&&e.data("here","destory"),d(t)}))),[]),(0,o.useEffect)((()=>{if(s.length<=0)return p&&p.unmark(),w(),n(0),void i([]);const e={acrossElements:!0,className:"find-block",noMatch:()=>{n(0),i([])},done:()=>{const e=h.querySelectorAll(".find-block");e.length<=0||(n(0),i(e),b())}};e.separateWordSearch=f.includes("separateWord"),e.caseSensitive=f.includes("caseSensitive"),e.diacritics=f.includes("diacritics"),e.wildcards=f.includes("wildcards")?"enabled":"disabled",e.accuracy=f.includes("accuracy")?"partially":"complementary",p.unmark({done:()=>{p.mark(s,e)}})}),[s,f]),(0,o.useEffect)((()=>{e.fire("display")}),[]),{index:t,marks:r,filter:m,search:s,option:f,disabled:x,handleSearch:d,optionChange:g,handleUp:()=>{!x&&b(!0)},handleDown:()=>{!x&&b()},handleFilterToggle(){y(!m)}}}function S(){const{app:e}=a(),{marks:t=[],search:n,filter:o,disabled:i,index:s=0,option:c,handleUp:l,handleDown:u,optionChange:d,handleSearch:h,handleFilterToggle:f}=E(e);return(0,r.jsxs)(p.Space,{direction:"vertical",style:{display:"flex",color:"var(--color)",padding:"10px 0 10px 14px"},children:[(0,r.jsxs)(p.Space,{children:[(0,r.jsx)(x,{value:n,onChange:h,onPressEnter:u}),(0,r.jsxs)("div",{style:{fontSize:14},children:[t.length<=0?0:s+1,"/",t.length]}),(0,r.jsx)(p.Button,{shape:"circle",onClick:l,icon:(0,r.jsx)(y.UpOutlined,{}),style:{opacity:i?"0.3":"1"}}),(0,r.jsx)(p.Button,{shape:"circle",onClick:u,icon:(0,r.jsx)(y.DownOutlined,{}),style:{opacity:i?"0.3":"1"}}),(0,r.jsx)(p.Button,{shape:"circle",onClick:f,icon:o?(0,r.jsx)(y.CaretDownOutlined,{}):(0,r.jsx)(y.FilterOutlined,{})})]}),o&&(0,r.jsx)(w,{app:e,value:c,onChange:d})]})}function I(){const{me:e,app:t}=a();return(0,o.useEffect)((()=>{t.fire("insert_style","\n      mark.find{\n        text-decoration: underline;\n      }\n      mark.find-block{\n        color: var(--select);\n        background-color: var(--selectbg);\n      }\n      mark.find-block a{\n        color: var(--select);\n      }\n    ")}),[]),(0,r.jsx)(m,{id:e.id,type:"toolbar",onChange:(n,r)=>{c(r)||(t.data("here",r||""),n&&t.fire(`${e.id}_with`))},onVisible:n=>{n||t.fire(`${e.id}_destory`)},children:(0,r.jsx)(S,{})})}window.definePlugin("find",(function(e,t,n){let o=null;return{start(){o||(o=n.display.render((({root:o,shadow:a,container:s})=>({app:t,me:e,children:(0,r.jsx)(I,{}),provider:(0,r.jsx)(i.Provider,{value:{app:t,root:o,shadow:a,container:s,me:e,dependencies:n}})})),{style:".ant-drawer.popup-toolbar {\n  height: auto;\n  bottom: auto;\n  left: auto;\n}\n.ant-drawer.popup-toolbar .ant-drawer-content-wrapper {\n  height: auto !important;\n  width: auto !important;\n  position: static !important;\n}\n.ant-drawer.popup-toolbar .ant-drawer-content {\n  flex-direction: row-reverse;\n  align-items: start;\n}\n.ant-drawer.popup-toolbar .ant-drawer-header-close-only {\n  padding: 16px;\n  border: 0;\n}\n.ant-drawer.popup-toolbar .ant-drawer-header-close-only .ant-drawer-close {\n  margin-right: 0;\n}\n\n.mobile .ant-drawer.popup-toolbar .ant-drawer-content-wrapper {\n  overflow: auto;\n  max-height: 100vh !important;\n  width: 100vw !important;\n}\n\n"}))},destory(){o&&(o(),o=null)}}}))})();