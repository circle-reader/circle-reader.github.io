(()=>{"use strict";function e(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function t(e){return e&&e.nodeType&&1===e.nodeType}function n(t){if(!function(t){return e(t,"String")}(t))return!1;const n=document.createElement("div");n.innerHTML=t;let o=!1;return function(e,t){if(!e)return;let n=0;if(e.forEach){const o=e.length;if(o<=0)return;for(;n<o&&!t(e[n],n);)n++}else{const o=Object.keys(e),r=o.length;if(r<=0)return;for(;n<r&&!t(e[o[n]],o[n]);)n++}}(n.childNodes,(e=>{if(1===e.nodeType)return o=!0,!0})),o}function o(){const t=document._zindex;if(e(t,"Number"))return t;{let e=0;return document.body.querySelectorAll("*").forEach((t=>{const n=Number.parseInt(window.getComputedStyle(t,null).getPropertyValue("z-index"),10);n>e&&(e=n)})),e<=0?1e3:(e<=1e3&&(e=1e3),e++,document._zindex=e,e)}}function r(e,t){return t?function(e){return new Promise(((t,n)=>{const o=document.createElement("div");o.innerHTML=e,o.contentEditable="true",o.style.position="fixed",o.style.top="-9999px",o.style.left="-9999px",document.body.appendChild(o);const r=document.createRange();r.selectNodeContents(o);const c=window.getSelection();c&&(c.removeAllRanges(),c.addRange(r));try{document.execCommand("copy")?t(!0):n("Failed to copy HTML using execCommand")}catch(e){n(e)}c&&c.removeAllRanges()}))}(e):function(e){return new Promise(((t,n)=>{const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.top="-9999px",o.style.left="-9999px",document.body.appendChild(o),o.select();try{document.execCommand("copy")?t(!0):n("Failed to copy text using execCommand")}catch(e){n(e)}document.body.removeChild(o)}))}(e)}window.definePlugin("copy",(function(){const e=(e,o,c)=>{let i="";return i=t(o)?o.innerHTML:o,function(e,t){try{if(navigator.clipboard&&window.ClipboardItem&&window.isSecureContext){const n={};return t?n["text/html"]=new Blob([e],{type:"text/html"}):n["text/plain"]=new Blob([e],{type:"text/plain"}),new Promise(((e,t)=>{navigator.clipboard.write([new ClipboardItem(n)]).then((()=>{e(!0)}),(e=>{t(e)}))}))}}catch(e){console.log(e)}return r(e,t)}(i,c&&n(i)).then((()=>{e.success("success")})).catch((t=>{e.error("fail"),e.log(t)}))};return(n,r,c)=>{if(r)if("safari"===n.device.browser){let i;const l=document.createElement("div");l.innerText=n.i18n("safari_copy"),l.style.cssText=`position:fixed;top:50%;left:50%;font-size:20px;color:#fff;background:red;padding:15px 30px;border-radius:5px;cursor:pointer;box-shadow:#8e8c8c 0px 4px 8px;transform:translate(-50%; -50%);z-index:${o()};}`,l.addEventListener("click",(()=>{e(n,r,c).finally((()=>{i&&clearTimeout(i),t(l)&&l.parentElement&&l.parentElement.removeChild(l)}))})),document.documentElement.appendChild(l),i&&clearTimeout(i),i=setTimeout((()=>{t(l)&&l.parentElement&&l.parentElement.removeChild(l)}),1e4)}else e(n,r,c);else n.log("data to copy is empty")}}))})();