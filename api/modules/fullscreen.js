(()=>{"use strict";window.definePlugin("fullscreen",(function(e,n){let t=null,l="normal",s=null;const r=()=>n.windows("get").then((e=>Promise.resolve(e.state)));return{onSelf(){const e="fullscreen"!==l;n.windows("update",e?{state:"fullscreen"}:{state:"normal",args:{top:0,left:0,width:screen.availWidth,height:screen.availHeight}}).then((()=>{l=e?"fullscreen":"normal",n.fire("fullscreen_change",e)}))},start(){r().then((e=>{l=e})),this.destory();const e=()=>{n.field("running")&&(t&&clearTimeout(t),t=setTimeout((()=>{r().then((e=>{["fullscreen","normal"].includes(e)&&e!==l&&n.fire("fullscreen_change","fullscreen"===e)}))}),1e3))};window.addEventListener("resize",e),s=()=>{window.removeEventListener("resize",e)}},destory(){s&&(s(),s=null)}}}))})();